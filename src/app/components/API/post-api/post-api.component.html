<div class="container">
  <div class="row">
    <h1>POST API INTEGRATIONS USING TEMPLATE FORM</h1>
    <div class="col-6">
      <h2 style="color: blue;">Car List</h2>
      <button class="btn btn-dark m-3" (click)="getAllCars()">Load Cars</button>
      <table class="table">
        <thead>
          <tr>
            <th scope="col">SL</th>
            <th scope="col">Brand</th>
            <th scope="col">Model</th>
            <th scope="col">Req No</th>
            <th scope="col">Daily Rate</th>
            <th scope="col">Action</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of carList; let i = index">
            <th scope="row">{{ i + 1 }}</th>
            <td>{{ item.brand }}</td>
            <td>{{ item.model }}</td>
            <td>{{ item.regNo }}</td>
            <td>{{ item.dailyRate }}</td>
            <td><button class="btn btn-primary" (click)="onEdit(item)">Edit</button></td>
            <td><button class="btn btn-danger" (click)="onDelete(item.carId)">Delete</button></td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-6">
      <h2>Create New Car</h2>

    
      <!-- Form Parts start here -->
      <!-- (ngSubmit)="onSaveCar()" -->

      <form class="row g-3">
        <!-- Reg No -->
        <div class="col-md-6">
          <label for="inputRegNo" class="form-label">Reg No</label>
          <input
            #regNo="ngModel"
            name="regNo"
            type="text"
            [(ngModel)]="carObj.regNo"
            class="form-control"
            id="inputRegNo"
            placeholder="Enter Registration Number"
          />
        </div>

        <!-- Brand -->
        <div class="col-md-6">
          <label for="inputBrand" class="form-label">Brand</label>
          <input
            #brandName="ngModel"
            name="brand"
            type="text"
            [(ngModel)]="carObj.brand"
            class="form-control"
            id="inputBrand"
            placeholder="Enter Car Brand"
          />
        </div>

        <!-- Model -->
        <div class="col-md-6">
          <label for="inputModel" class="form-label">Model</label>
          <input
            #model="ngModel"
            name="model"
            type="text"
            [(ngModel)]="carObj.model"
            class="form-control"
            id="inputModel"
            placeholder="Enter Car Model"
          />
        </div>

        <!-- Year -->
        <div class="col-md-6">
          <label for="inputYear" class="form-label">Year</label>
          <input
            #year="ngModel"
            name="year"
            type="number"
            [(ngModel)]="carObj.year"
            class="form-control"
            id="inputYear"
            placeholder="Enter Manufacturing Year"
          />
        </div>

        <!-- Color -->
        <div class="col-md-6">
          <label for="inputColor" class="form-label">Color</label>
          <input
            #color="ngModel"
            name="color"
            type="text"
            [(ngModel)]="carObj.color"
            class="form-control"
            id="inputColor"
            placeholder="Enter Car Color"
          />
        </div>

        <!-- Daily Rate -->
        <div class="col-md-6">
          <label for="inputDailyRate" class="form-label">Daily Rate ($)</label>
          <input
            #dailyRate="ngModel"
            name="dailyRate"
            type="number"
            [(ngModel)]="carObj.dailyRate"
            class="form-control"
            id="inputDailyRate"
            placeholder="Enter Daily Rate"
          />
        </div>

        <!-- Car Image URL -->
        <div class="col-12">
          <label for="inputCarImageURL" class="form-label">Car Image URL</label>
          <input
            #carImage="ngModel"
            name="carImage"
            type="url"
            [(ngModel)]="carObj.carImage"
            class="form-control"
            id="inputCarImageURL"
            placeholder="Enter Image URL"
          />
        </div>

        <!-- Submit Button -->
        <div class="col-12">
          <button class="btn btn-dark m-2">Reset Form</button>
          
            @if (carObj.carId == 0){
              <button type="submit" class="btn btn-primary" (click)="onSaveCar()">Submit</button>
            }@else{
              <button class="btn btn-warning m-2" (click)="updateCar()">Update Car</button>
            }
          
        
        
        </div>
      </form>
    </div>
  </div>
</div>
